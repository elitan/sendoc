table:
  schema: public
  name: profiles
configuration:
  custom_root_fields:
    insert: insertProfiles
    select_aggregate: profilesAggregate
    insert_one: insertProfile
    select_by_pk: profile
    delete: deleteProfiles
    update: updateProfiles
    delete_by_pk: deleteProfile
    update_by_pk: updateProfile
  custom_name: profiles
  column_config:
    stripe_customer_id:
      custom_name: stripeCustomerId
  custom_column_names:
    stripe_customer_id: stripeCustomerId
object_relationships:
  - name: user
    using:
      foreign_key_constraint_on: id
event_triggers:
  - name: profiles-delete-stripe
    definition:
      enable_manual: false
      delete:
        columns: '*'
    retry_conf:
      num_retries: 0
      interval_sec: 10
      timeout_sec: 15
    webhook: '{{NHOST_BACKEND_URL}}/v1/functions/events/profiles/delete/stripe'
    headers:
      - name: nhost-webhook-secret
        value_from_env: NHOST_WEBHOOK_SECRET
